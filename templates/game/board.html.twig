{% extends 'layouts/main.html.twig' %}

{% block body %}
  <div class="col-md-12 text-center my-5">
    {% if game.mode == 'human' %}
      <div class="game-mode">
          <div class="icon">
              <i class="fa fa-user fa-2x"></i>
              <span>vs</span>
              <i class="fa fa-user fa-2x"></i>
          </div>
      </div>
    {% endif %}
    {% if game.mode == 'machine' %}
      <div class="game-mode">
          <div class="icon">
              <i class="fa fa-user fa-2x"></i>
              <span>vs</span>
              <i class="fa fa-laptop fa-2x"></i>
          </div>
      </div>
    {% endif %}
  </div>
  <div id="board_container">
    <div id="player1_info"
         class="player_info {{ game.turn == 1 ? 'turn' : '' }} {{ game.result == 1 ? 'winner' : '' }}">
      <i class="far fa-circle fa-2x player1"></i>
      <span>{% trans %}player1{% endtrans %}</span>
      <i class="fa fa-user fa-2x"></i>
    </div>
    <table id="board"
           data-game="{{ game.id }}"
           data-turn="{{ game.turn }}"
           data-result="{{ game.result }}"
           data-player={{ game.mode == 'machine' ? 1 : 3 }}>
      {% for row in 3..1 %}
        <tr>
          {% for column in 3..1 %}
            {% set index = (row - 1) * 3 + column %}
            <td class="{{ bitboard[index].player }}" data-bitboard="{{ bitboard[index].bitboard }}"></td>
          {% endfor %}
        </tr>
      {% endfor %}
    </table>
    <div id="player2_info"
         class="player_info {{ game.turn == 2 ? 'turn' : '' }} {{ game.result == 2 ? 'winner' : '' }}">
      <i class="fa fa-times fa-2x player2"></i>
      <span>{% trans %}player2{% endtrans %}</span>
      {% if game.mode == 'machine' %}
        <i class="fa fa-laptop fa-2x"></i>
      {% else %}
        <i class="fa fa-user fa-2x"></i>
      {% endif %}
    </div>
  </div>

  <div id="buttons_game_end" class="col-md-12 text-center my-4" {{ game.result ? '' : 'hidden' }}>
    <div class="btn-group" role="group" aria-label="Basic example">
      <a type="button" class="btn btn-secondary" href="/">
        <i class="fa fa-home"></i>
        {% trans %}home{% endtrans %}
      </a>
      <a type="button"
         class="btn btn-secondary"
         href="/index.php/game/rematch/{{ game.id }}">
        <i class="fa fa-retweet"></i>
        {% trans %}rematch{% endtrans %}
      </a>
    </div>
  </div>

  <div id="alerts" class="my-3">
    <div id="player1_wins"
         class="alert alert-success" {{ game.result != 1 ? 'hidden' : '' }}>
      <i class="far fa-circle player1"></i>
      {% trans %}player1_wins{% endtrans %}
    </div>
    <div id="player2_wins"
         class="alert alert-danger" {{ game.result != 2 ? 'hidden' : '' }}>
      <i class="fa fa-times player2"></i>
      {% trans %}player2_wins{% endtrans %}
    </div>
    <div id="player3_wins"
         class="alert alert-warning" {{ game.result != 3 ? 'hidden' : '' }}>
      <i class="far fa-circle player1"></i>
      <i class="fa fa-times player2"></i>
    {% trans %}game_draw{% endtrans %}</div>
  </div>
{% endblock %}
